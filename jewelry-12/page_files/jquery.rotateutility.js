(function(C,E){var A={0:0};var B={0:1};var D={0:0};C.math={};C.math.sin=function(G){if(G<0){G=G+360}if(G>=360){G=G%360}if(A[G]==E){var F=Math.sin(G*Math.PI/180);A[G]=F}return A[G]};C.math.cos=function(G){if(G<0){G=G+360}if(G>=360){G=G%360}if(B[G]==E){var F=Math.cos(G*Math.PI/180);B[G]=F}return B[G]};C.math.tan=function(G){if(G<0){G=G+360}if(G>=360){G=G%360}if(D[G]==E){var F=Math.tan(G*Math.PI/180);D[G]=F}return D[G]};C.math.acos=function(F){var G=Math.acos(F);return Math.round(G*180/Math.PI)};C.parseInteger=function(F){var G=parseInt(F);if(isNaN(G)){return 0}return G};C.divrotate=function(L,I,K,H){L=C(L);var J=L.width();var M=L.height();if(H){J=H[0];M=H[1]}if(K){var G=K[0];var F=K[1];if(C.browser.msie&&C.browser.version<9){J=parseInt(L.data("IEWidth"));M=parseInt(L.data("IEHeight"));G=L.data("IELeft");if(G==E){G=K[0];L.data("IELeft",G)}F=L.data("IETop");if(F==E){F=K[1];L.data("IETop",F)}ieRotate({degree:I,left:G,top:F,width:J,height:M,dom:L})}else{L[0].style.left=Math.round(G)+"px";L[0].style.top=Math.round(F)+"px"}}if(C.browser.safari||C.browser.mozilla||C.browser.opera||(C.browser.msie&&C.browser.version=="9.0")){ieRotate({degree:I,dom:L})}};C.fn.modattr=function(G,F){if(G=="leftpos"){var H=this.data("prop_leftpos");if(!H){H=[parseInt(this.css("left")),parseInt(this.css("top"))]}if(F!=E){this.data("prop_leftpos",F)}return H}if(G=="degree"){var H=this.data("deg");if(!H){H=0}if(F!=E){this.data("deg",F)}return H}if(G=="size"){var H=this.data("prop_size");if(!H){H=[this.width(),this.height()]}if(F!=E){this.data("prop_size",F)}return H}};C.divrotate.reversePos=function(I,J,N,O){var G=I[0];var F=I[1];var L=C.math.cos(J);var M=C.math.sin(J);if(C.browser.msie&&C.browser.version<9){var K=G;if(J<90){K=G+O*M}else{if(J<180){K=G+O*M-N*L}else{if(J<270){K=G-N*L}else{K=G}}}var H=F;if(J<90){H=F}else{if(J<180){H=F-O*L}else{if(J<270){H=F-O*L-N*M}else{H=F-N*M}}}return[K,H]}else{return I}};C.divrotate.getMaxDistance=function(P){var M=P.data("deg");var I=parseInt(P.css("left"));var H=parseInt(P.css("top"));var N=P.width();var Q=P.height();var K=canv.width();var L,G,F;if(!M){L=I;G=K-N-I;F=H}else{if(M>360){M=M%360}var O=C.math.cos(M);var J=C.math.sin(M);if(M<=90){L=I-Q*J;G=K-I-N*O;F=H}else{if(M>90&&M<=180){L=I-Q*J+N*O;G=K-I;F=H+Q*O}else{if(M>180&&M<=270){L=I+N*O;G=K-I+Q*J;F=H+Q*O+N*J}else{if(M>270&&M<=360){L=I;G=K-I+Q*J-N*O;F=H+N*J}}}}}return{left:L,right:G,top:F}};C.divrotate.getDegreeModMaxPointOrigin=function(R,M,L,J,K){var N=C.getElementFatherid(R);var H=C("#"+N).ab_pos_cnter("top");var M=M;if(!M){var S=0;var I=J[0];var O=J[1];switch(K){case"left":S=L[0];break;case"right":S=L[0]+I;break;case"top":S=L[1]+H;break;case"buttom":S=L[1]+O+H;break}return S}else{if(C.browser.msie&&C.browser.version<9){var S=0;switch(K){case"left":S=R.position().left;break;case"right":S=R.position().left+R.width();break;case"top":S=R.position().top;break;case"buttom":S=R.position().top+R.height();break}return S}var S=0;var I=J[0];var O=J[1];var G=L[0];var Q=L[1];if(M>360){M=M%360}var P=C.math.cos(M);var F=C.math.sin(M);switch(K){case"left":if(M<=90){S=G-O*F}else{if(M>90&&M<=180){S=G-O*F+I*P}else{if(M>180&&M<=270){S=G+I*P}else{if(M>270&&M<=360){S=G}}}}break;case"right":if(M<=90){S=G+I*P}else{if(M>90&&M<=180){S=G}else{if(M>180&&M<=270){S=G-O*F}else{if(M>270&&M<=360){S=G-O*F+I*P}}}}break;case"top":if(M<=90){S=Q}else{if(M>90&&M<=180){S=Q+O*P}else{if(M>180&&M<=270){S=Q+O*P+I*F}else{if(M>270&&M<=360){S=Q+I*F}}}}S=S+H;break;case"buttom":if(M<=90){S=Q+O*P+I*F}else{if(M>90&&M<=180){S=Q+I*F}else{if(M>180&&M<=270){S=Q}else{if(M>270&&M<=360){S=Q+O*P}}}}S=S+H;break}return S}};C.divrotate.getDegreeModMaxPoint=function(K,I,F){var J=K.data("deg");if(I==null){I=[C.parseInteger(K.css("left")),C.parseInteger(K.css("top"))]}var G=K.width();var H=K.height();return C.divrotate.getDegreeModMaxPointOrigin(K,J,I,[G,H],F)};C.divrotate.getDegreeModMaxPointForRotate=function(K,J,I,F){var G=K.width();var H=K.height();return C.divrotate.getDegreeModMaxPointOrigin(K,J,I,[G,H],F)};C.divrotate.getDegreeResizeCursor=function(G){var F=G.data("deg");if(F==null){F=0}if(F>360){F=F%360}if(F<=22||F>=338){G.find(".ui-resizable-n").css("cursor","n-resize");G.find(".ui-resizable-e").css("cursor","e-resize");G.find(".ui-resizable-w").css("cursor","w-resize");G.find(".ui-resizable-s").css("cursor","s-resize");G.find(".ui-resizable-ne").css("cursor","ne-resize");G.find(".ui-resizable-se").css("cursor","se-resize");G.find(".ui-resizable-nw").css("cursor","nw-resize");G.find(".ui-resizable-sw").css("cursor","sw-resize")}else{if(F>22&&F<=67){G.find(".ui-resizable-n").css("cursor","ne-resize");G.find(".ui-resizable-e").css("cursor","se-resize");G.find(".ui-resizable-w").css("cursor","nw-resize");G.find(".ui-resizable-s").css("cursor","sw-resize");G.find(".ui-resizable-ne").css("cursor","e-resize");G.find(".ui-resizable-se").css("cursor","s-resize");G.find(".ui-resizable-nw").css("cursor","n-resize");G.find(".ui-resizable-sw").css("cursor","w-resize")}else{if(F>67&&F<=112){G.find(".ui-resizable-n").css("cursor","e-resize");G.find(".ui-resizable-e").css("cursor","s-resize");G.find(".ui-resizable-w").css("cursor","n-resize");G.find(".ui-resizable-s").css("cursor","w-resize");G.find(".ui-resizable-ne").css("cursor","se-resize");G.find(".ui-resizable-se").css("cursor","sw-resize");G.find(".ui-resizable-nw").css("cursor","ne-resize");G.find(".ui-resizable-sw").css("cursor","nw-resize")}else{if(F>112&&F<=157){G.find(".ui-resizable-n").css("cursor","se-resize");G.find(".ui-resizable-e").css("cursor","sw-resize");G.find(".ui-resizable-w").css("cursor","ne-resize");G.find(".ui-resizable-s").css("cursor","nw-resize");G.find(".ui-resizable-ne").css("cursor","s-resize");G.find(".ui-resizable-se").css("cursor","w-resize");G.find(".ui-resizable-nw").css("cursor","e-resize");G.find(".ui-resizable-sw").css("cursor","n-resize")}else{if(F>157&&F<=202){G.find(".ui-resizable-n").css("cursor","s-resize");G.find(".ui-resizable-e").css("cursor","w-resize");G.find(".ui-resizable-w").css("cursor","e-resize");G.find(".ui-resizable-s").css("cursor","n-resize");G.find(".ui-resizable-ne").css("cursor","sw-resize");G.find(".ui-resizable-se").css("cursor","nw-resize");G.find(".ui-resizable-nw").css("cursor","se-resize");G.find(".ui-resizable-sw").css("cursor","ne-resize")}else{if(F>202&&F<=247){G.find(".ui-resizable-n").css("cursor","sw-resize");G.find(".ui-resizable-e").css("cursor","nw-resize");G.find(".ui-resizable-w").css("cursor","se-resize");G.find(".ui-resizable-s").css("cursor","ne-resize");G.find(".ui-resizable-ne").css("cursor","w-resize");G.find(".ui-resizable-se").css("cursor","n-resize");G.find(".ui-resizable-nw").css("cursor","s-resize");G.find(".ui-resizable-sw").css("cursor","e-resize")}else{if(F>247&&F<=292){G.find(".ui-resizable-n").css("cursor","w-resize");G.find(".ui-resizable-e").css("cursor","n-resize");G.find(".ui-resizable-w").css("cursor","s-resize");G.find(".ui-resizable-s").css("cursor","e-resize");G.find(".ui-resizable-ne").css("cursor","nw-resize");G.find(".ui-resizable-se").css("cursor","ne-resize");G.find(".ui-resizable-nw").css("cursor","sw-resize");G.find(".ui-resizable-sw").css("cursor","se-resize")}else{if(F>292&&F<=337){G.find(".ui-resizable-n").css("cursor","nw-resize");G.find(".ui-resizable-e").css("cursor","ne-resize");G.find(".ui-resizable-w").css("cursor","sw-resize");G.find(".ui-resizable-s").css("cursor","se-resize");G.find(".ui-resizable-ne").css("cursor","n-resize");G.find(".ui-resizable-se").css("cursor","e-resize");G.find(".ui-resizable-nw").css("cursor","w-resize");G.find(".ui-resizable-sw").css("cursor","s-resize")}}}}}}}}};C.divrotate.getDegreeResizeChange=function(O,Z,T,W,Y){var K=O.data("deg");if(K>360){K=K%360}var G=Math.sin(K*Math.PI/180);var N=Math.cos(K*Math.PI/180);if(C.browser.msie&&C.browser.version<9){var L=O.data("IEWidth");var M=O.data("IEHeight");if(K>=0&&K<90){var P=T.left+M*G,J=T.top}else{if(K>=90&&K<180){var P=M*G-L*N+T.left,J=T.top-M*N}else{if(K>180&&K<=270){var P=T.left-L*N,J=T.top-L*G-M*N}else{if(K>270&&K<360){var P=T.left,J=L*N+T.top}}}}}else{var L=W.width;var M=W.height;var P=T.left,J=T.top}var H=Z[0];var R=Z[1];var F=C.math.tan(K);var U,I,Q;var X=function(a){U=C.math.acos((H+a*R)/(Math.sqrt(H*H+R*R)*Math.sqrt(1+a*a)));I=Math.sqrt(H*H+R*R)*C.math.sin(U);Q=H*a-R};var S=function(a){U=C.math.acos((H-a*R)/(Math.sqrt(H*H+R*R)*Math.sqrt(1+a*a)));I=Math.sqrt(H*H+R*R)*C.math.sin(U);Q=0-(H*a+R)};if(C.browser.msie&&C.browser.version<9){var V=null;switch(Y){case"n":X(F);if(Q==0){return{}}if(K<=90){if(Q>0){V={height:Math.round(M+I),left:Math.round(P+I*C.math.sin(K)-(M+I)*C.math.sin(K)),top:Math.round(J-I*C.math.cos(K))}}else{if(Q<0){V={height:Math.round(M-I),left:Math.round(P-I*C.math.sin(K)-(M-I)*C.math.sin(K)),top:Math.round(J+I*C.math.cos(K))}}}}else{if(K>270&&K<360){if(Q>0){V={height:Math.round(M+I),left:Math.round(P+I*C.math.sin(K)),top:Math.round(J-I*C.math.cos(K)-L*C.math.cos(K))}}else{if(Q<0){V={height:Math.round(M-I),left:Math.round(P-I*C.math.sin(K)),top:Math.round(J+I*C.math.cos(K)-L*C.math.cos(K))}}}}else{if(K>90&&K<=180){if(Q>0){V={height:Math.round(M-I),left:Math.round(P-I*C.math.sin(K)-(M-I)*C.math.sin(K)+L*C.math.cos(K)),top:Math.round(J+I*C.math.cos(K)+(M-I)*C.math.cos(K))}}else{if(Q<0){V={height:Math.round(M+I),left:Math.round(P+I*C.math.sin(K)-(M+I)*C.math.sin(K)+L*C.math.cos(K)),top:Math.round(J-I*C.math.cos(K)+(M+I)*C.math.cos(K))}}}}else{if(K>180&&K<=270){if(Q>0){V={height:Math.round(M-I),left:Math.round(P-I*C.math.sin(K)+L*C.math.cos(K)),top:Math.round(J+I*C.math.cos(K)+(M-I)*C.math.cos(K)+L*C.math.sin(K))}}else{if(Q<0){V={height:Math.round(M+I),left:Math.round(P+I*C.math.sin(K)+L*C.math.cos(K)),top:Math.round(J-I*C.math.cos(K)+(M+I)*C.math.cos(K)+L*C.math.sin(K))}}}}}}}break;case"s":X(F);if(Q==0){return{}}if(K<=90){if(Q>0){V={width:L,height:Math.round(M-I),left:Math.round(P-(M-I)*C.math.sin(K)),top:J}}else{if(Q<0){V={width:L,height:Math.round(M+I),left:Math.round(P-(M+I)*C.math.sin(K)),top:J}}}}else{if(K>90&&K<=180){if(Q>0){V={width:L,height:Math.round(M+I),left:Math.round(P-(M+I)*C.math.sin(K)+L*C.math.cos(K)),top:Math.round(J+(M+I)*C.math.cos(K))}}else{if(Q<0){V={width:L,height:Math.round(M-I),left:Math.round(P-(M-I)*C.math.sin(K)+L*C.math.cos(K)),top:Math.round(J+(M-I)*C.math.cos(K))}}}}else{if(K>180&&K<=270){if(Q>0){V={width:L,height:Math.round(M+I),left:Math.round(P+L*C.math.cos(K)),top:Math.round(J+(M+I)*C.math.cos(K)+L*C.math.sin(K))}}else{if(Q<0){V={width:L,height:Math.round(M-I),left:Math.round(P+L*C.math.cos(K)),top:Math.round(J+(M-I)*C.math.cos(K)+L*C.math.sin(K))}}}}else{if(K>270&&K<360){if(Q>0){V={width:L,height:Math.round(M-I),left:P,top:Math.round(J-L*C.math.cos(K))}}else{if(Q<0){V={width:L,height:Math.round(M+I),left:P,top:Math.round(J-L*C.math.cos(K))}}}}}}}break;case"w":S(1/F);if(Q==0){return{}}if(K<=90){if(Q>0){V={width:Math.round(L+I),height:M,left:Math.round(P-I*C.math.cos(K)-M*C.math.sin(K)),top:Math.round(J-I*C.math.sin(K))}}else{if(Q<0){V={width:Math.round(L-I),height:M,left:Math.round(P+I*C.math.cos(K)-M*C.math.sin(K)),top:Math.round(J+I*C.math.sin(K))}}}}else{if(K>90&&K<=180){if(Q>0){V={width:Math.round(L+I),height:M,left:Math.round(P-I*C.math.cos(K)-M*C.math.sin(K)+(L+I)*C.math.cos(K)),top:Math.round(J-I*C.math.sin(K)+M*C.math.cos(K))}}else{if(Q<0){V={width:Math.round(L-I),height:M,left:Math.round(P+I*C.math.cos(K)-M*C.math.sin(K)+(L-I)*C.math.cos(K)),top:Math.round(J+I*C.math.sin(K)+M*C.math.cos(K))}}}}else{if(K>180&&K<=270){if(Q>0){V={width:Math.round(L-I),height:M,left:Math.round(P+I*C.math.cos(K)+(L-I)*C.math.cos(K)),top:Math.round(J+I*C.math.sin(K)+(L-I)*C.math.sin(K)+M*C.math.cos(K))}}else{if(Q<0){V={width:Math.round(L+I),height:M,left:Math.round(P-I*C.math.cos(K)+(L+I)*C.math.cos(K)),top:Math.round(J-I*C.math.sin(K)+(L+I)*C.math.sin(K)+M*C.math.cos(K))}}}}else{if(K>270&&K<360){if(Q>0){V={width:Math.round(L-I),height:M,left:Math.round(P+I*C.math.cos(K)),top:Math.round(J+I*C.math.sin(K)-(L-I)*C.math.cos(K))}}else{if(Q<0){V={width:Math.round(L+I),height:M,left:Math.round(P-I*C.math.cos(K)),top:Math.round(J-I*C.math.sin(K)-(L+I)*C.math.cos(K))}}}}}}}break;case"e":S(1/F);if(Q==0){return{}}if(K<=90){if(Q>0){V={width:Math.round(L-I),height:M,left:P-M*C.math.sin(K),top:J}}else{if(Q<0){V={width:Math.round(L+I),height:M,left:P-M*C.math.sin(K),top:J}}}}else{if(K>90&&K<=180){if(Q>0){V={width:Math.round(L-I),height:M,left:P-M*C.math.sin(K)+(L-I)*C.math.cos(K),top:J+M*C.math.cos(K)}}else{if(Q<0){V={width:Math.round(L+I),height:M,left:P-M*C.math.sin(K)+(L+I)*C.math.cos(K),top:J+M*C.math.cos(K)}}}}else{if(K>180&&K<=270){if(Q>0){V={width:Math.round(L+I),height:M,left:P+(L+I)*C.math.cos(K),top:J+(L+I)*C.math.sin(K)+M*C.math.cos(K)}}else{if(Q<0){V={width:Math.round(L-I),height:M,left:P+(L-I)*C.math.cos(K),top:J+(L-I)*C.math.sin(K)+M*C.math.cos(K)}}}}else{if(K>270&&K<360){if(Q>0){V={width:Math.round(L+I),height:M,left:P,top:J-(L+I)*C.math.cos(K)}}else{if(Q<0){V={width:Math.round(L-I),height:M,left:P,top:J-(L-I)*C.math.cos(K)}}}}}}}break}O.data("IEWidth_tmp",V.width||L).data("IEHeight_tmp",V.height||M);C(".propblk,.posblk").remove();return V}else{switch(Y){case"n":X(F);if(Q==0){return{}}if(K<=90||(K>270&&K<=360)){if(Q>0){return{height:Math.round(M+I),left:Math.round(P+I*C.math.sin(K)),top:Math.round(J-I*C.math.cos(K))}}else{if(Q<0){return{height:Math.round(M-I),left:Math.round(P-I*C.math.sin(K)),top:Math.round(J+I*C.math.cos(K))}}}}else{if(K>90&&K<=270){if(Q>0){return{height:Math.round(M-I),left:Math.round(P-I*C.math.sin(K)),top:Math.round(J+I*C.math.cos(K))}}else{if(Q<0){return{height:Math.round(M+I),left:Math.round(P+I*C.math.sin(K)),top:Math.round(J-I*C.math.cos(K))}}}}}break;case"s":X(F);if(Q==0){return{}}if(K<=90||(K>270&&K<=360)){if(Q>0){return{height:Math.round(M-I)}}else{if(Q<0){return{height:Math.round(M+I)}}}}else{if(K>90&&K<=270){if(Q>0){return{height:Math.round(M+I)}}else{if(Q<0){return{height:Math.round(M-I)}}}}}break;case"w":S(1/F);if(Q==0){return{}}if(K<=180){if(Q>0){return{width:Math.round(L+I),left:Math.round(P-I*C.math.cos(K)),top:Math.round(J-I*C.math.sin(K))}}else{if(Q<0){return{width:Math.round(L-I),left:Math.round(P+I*C.math.cos(K)),top:Math.round(J+I*C.math.sin(K))}}}}else{if(K>180&&K<=360){if(Q>0){return{width:Math.round(L-I),left:Math.round(P+I*C.math.cos(K)),top:Math.round(J+I*C.math.sin(K))}}else{if(Q<0){return{width:Math.round(L+I),left:Math.round(P-I*C.math.cos(K)),top:Math.round(J-I*C.math.sin(K))}}}}}break;case"e":S(1/F);if(Q==0){return{}}if(K<=180){if(Q>0){return{width:Math.round(L-I)}}else{if(Q<0){return{width:Math.round(L+I)}}}}else{if(K>180&&K<=360){if(Q>0){return{width:Math.round(L+I)}}else{if(Q<0){return{width:Math.round(L-I)}}}}}break}}}})(jQuery);function rotateWithCenter(N,O){N=$(N);var I=N.modattr("leftpos");var C=I[0];var K=I[1];var F=N.modattr("degree");var J=N.width();var E=N.height();var G=$.math.sin(F);var H=$.math.cos(F);var L=[C+J/2*H-E/2*G,K+E/2*H+J/2*G];var M=$.math.sin(O);var B=$.math.cos(O);var D=L[0]+E/2*M-J/2*B;var A=L[1]-J/2*M-E/2*B;$.divrotate(N,O,[D,A]);toolbarRotate(N,O,{w:J,h:E})}function toolbarRotate(L,H,B){if($(".propblk").length==0){return}L=$(L);var R=L.data("toolbarsize");if(!R){R=[$(".propblk").width(),$(".propblk").height()];L.data("toolbarsize",R)}if($.browser.msie&&$.browser.version<9){var N=R[0];var V=R[1];var J=$("#"+L.attr("id")).width();var K=$("#"+L.attr("id")).height();var Q=$("#"+L.attr("id")).position().left;var S=$("#"+L.attr("id")).position().top;var W=H%360;var X=L.data("IEWidth");var A=L.data("IEHeight");if(L.data("sinx")==undefined){var T=Math.PI*W/180;var G=Math.cos(T);var C=Math.sin(T);L.data("sinx",C);L.data("cosx",G)}else{var G=L.data("cosx");var C=L.data("sinx")}if(W>0&&W<=90){var E=(J+Q)-V*C;var F=S+(K-A*G)}else{if(W>90&&W<=180){var E=J+Q-(V*C-N*G)-(-1*G*X);var F=K+S+V*G}else{if(W>180&&W<=270){var E=Q+N*G;var F=S-A*G+V*G+N*C}else{if(W>270&&W<360){var E=Q+X*G;var F=S+N*C}}}}$(".propblk").css({filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+G+",M12="+(-C)+",M21="+C+",M22="+G+",SizingMethod='auto expand')","left":E+"px","top":F+"px"})}else{var I=L.data("prop_size");var J=0;if(I){J=I[0]}else{J=L.width()}if(!H){H=0}var M=L.data("prop_leftpos");var P=parseInt(L.css("left"));var U=parseInt(L.css("top"));if(M){P=M[0];U=M[1]}var K=35;var D=$.math.sin(H)*K+parseInt(P)+canv.offset().left;var O=parseInt(U)-$.math.cos(H)*K+$("#"+$.getElementFatherid(L)).ab_pos_cnter("top");$.divrotate($(".propblk"),H,[D,O],R)}}function modPosRotate(M,I,B){if($(".posblk").length==0){return}M=$(M);var S=M.data("modpossize");if(!S){S=[$(".posblk").width(),$(".posblk").height()];M.data("modpossize",S)}if(!I){I=0}var N=M.data("prop_leftpos");var Q=parseInt(M.css("left"));var G=parseInt(M.css("top"));if(N){Q=N[0];G=N[1]}M.data("deg",I);$(".posblk").find(".posblk-position").html(Math.round(Q)+","+Math.round(G)).andSelf().find(".posblk-deg").html(M.data("deg")%360);if($.browser.msie&&$.browser.version<9){var V=S[0];var F=S[1];var K=$("#"+M.attr("id")).width();var L=$("#"+M.attr("id")).height();var R=$("#"+M.attr("id")).position().left;var T=$("#"+M.attr("id")).position().top;var W=I%360;var X=M.data("IEWidth");var A=M.data("IEHeight");if(M.data("sinx")==undefined){var U=Math.PI*W/180;var H=Math.cos(U);var C=Math.sin(U);M.data("sinx",C);M.data("cosx",H)}else{var H=M.data("cosx");var C=M.data("sinx")}if(W>=0&&W<=90){var O=R+A*C;var D=T-F*H}else{if(W>90&&W<=180){var O=R+K+V*H;var D=T-A*H}else{if(W>180&&W<=270){var O=R-X*H+V*H+F*C;var D=T+L+V*C}else{if(W>270&&W<360){var O=R+F*C;var D=T-X*C-F*H+V*C}}}}$(".posblk").css({filter:"progid:DXImageTransform.Microsoft.Matrix(M11="+H+",M12="+(-C)+",M21="+C+",M22="+H+",SizingMethod='auto expand')","left":O+"px","top":D+"px"})}else{var J=M.data("prop_size");var K=0;if(J){K=J[0]+10}else{K=M.width()+10}var E=$.math.cos(I)*K+parseInt(Q)+canv.offset().left;var P=$.math.sin(I)*K+parseInt(G)+$("#"+$.getElementFatherid(M)).ab_pos_cnter("top");$.divrotate($(".posblk"),I,[E,P],S)}}function getOldProxyFromSize(L,I,J,K){var F=I%360;var M=$("#"+L.attr("id")).position().left;var G=$("#"+L.attr("id")).position().top;var A=$("#"+L.attr("id"));if(L.data("sinx")==undefined){var B=Math.PI*F/180;var H=Math.cos(B);var C=Math.sin(B);L.data("sinx",C);L.data("cosx",H)}else{var C=L.data("sinx");var H=L.data("cosx")}if(F==0){var D=M;var E=G}else{if(F>=0&&F<=90){var D=(K*C+J*H-J)/2+M;var E=(J*C+K*H-K)/2+G}else{if(F>90&&F<=180){var D=(K*C-J*H-J)/2+M;var E=(J*C-K*H-K)/2+G}else{if(F>180&&F<=270){var D=(-1*K*C-J*H-J)/2+M;var E=(-1*J*C-K*H-K)/2+G}else{if(F>270&&F<360){var D=(-1*K*C+J*H-J)/2+M;var E=(-1*J*C+K*H-K)/2+G}}}}}return[D,E]}function getLeftPointProxy(I,F){var B=F%360;var D=I.position().left,E=I.position().top;var J=Math.PI*B/180;var G=Math.sin(J),A=Math.cos(J);var C=I.data("IEWidth"),H=I.data("IEHeight");if(B>=0&&B<90){return[Math.round(D+H*G),Math.round(E)]}else{if(B>=90&&B<180){return[Math.round(D+H*G-C*A),Math.round(E-H*A)]}else{if(B>180&&B<=270){return[Math.round(D-C*A),Math.round(E-H*A-C*G)]}else{if(B>270&&B<360){return[Math.round(D),Math.round(E-C*G)]}}}}};