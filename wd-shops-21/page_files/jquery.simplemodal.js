(function(C){var D=C.browser.msie&&parseInt(C.browser.version)===6&&typeof window.XMLHttpRequest!=="object",A=C.browser.msie&&parseInt(C.browser.version)===7,E=null,B=[];C.modal=function(F,G){return C.modal.impl.init(F,G)};C.modal.close=function(){C.modal.impl.close()};C.modal.focus=function(F){C.modal.impl.focus(F)};C.modal.setContainerDimensions=function(){C.modal.impl.setContainerDimensions()};C.modal.setPosition=function(){C.modal.impl.setPosition()};C.modal.update=function(F,G){C.modal.impl.update(F,G)};C.fn.modal=function(F){return C.modal.impl.init(this,F)};C.modal.defaults={appendTo:"body",focus:true,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:false,autoPosition:true,zIndex:1000,close:true,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:true,overlayClose:false,position:null,persist:false,modal:true,onOpen:null,onShow:null,onClose:null};C.modal.impl={d:{},init:function(F,G){var H=this;if(H.d.data){return false}E=C.browser.msie&&!C.boxModel;H.o=C.extend({},C.modal.defaults,G);H.zIndex=H.o.zIndex;H.occb=false;if(typeof F==="object"){F=F instanceof jQuery?F:C(F);H.d.placeholder=false;if(F.parent().parent().size()>0){F.before(C("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"}));H.d.placeholder=true;H.display=F.css("display");if(!H.o.persist){H.d.orig=F.clone(true)}}}else{if(typeof F==="string"||typeof F==="number"){F=C("<div></div>").html(F)}else{alert("SimpleModal Error: Unsupported data type: "+typeof F);return H}}H.create(F);H.open();C.isFunction(H.o.onShow)&&H.o.onShow.apply(H,[H.d]);return H},create:function(F){var G=this;B=G.getDimensions();if(G.o.modal&&D){G.d.iframe=C('<iframe src="javascript:false;"></iframe>').css(C.extend(G.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:B[0],width:B[1],zIndex:G.o.zIndex,top:0,left:0})).appendTo(G.o.appendTo)}G.d.overlay=C("<div></div>").attr("id",G.o.overlayId).addClass("simplemodal-overlay").css(C.extend(G.o.overlayCss,{display:"none",opacity:G.o.opacity/100,height:G.o.modal?B[0]:0,width:G.o.modal?B[1]:0,position:"fixed",left:0,top:0,zIndex:G.o.zIndex+1})).appendTo(G.o.appendTo);G.d.container=C("<div></div>").attr("id",G.o.containerId).addClass("simplemodal-container").css(C.extend(G.o.containerCss,{display:"none",position:"fixed",zIndex:G.o.zIndex+2})).append(G.o.close&&G.o.closeHTML?C(G.o.closeHTML).addClass(G.o.closeClass):"").appendTo(G.o.appendTo);G.d.wrap=C("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(G.d.container);G.d.data=F.attr("id",F.attr("id")||G.o.dataId).addClass("simplemodal-data").css(C.extend(G.o.dataCss,{display:"none"})).appendTo("body");G.setContainerDimensions();G.d.data.appendTo(G.d.wrap);if(D||E){G.fixIE()}},bindEvents:function(){var F=this;C("."+F.o.closeClass).bind("click.simplemodal",function(G){G.preventDefault();F.close()});F.o.modal&&F.o.close&&F.o.overlayClose&&F.d.overlay.bind("click.simplemodal",function(G){G.preventDefault();F.close()});C(document).bind("keydown.simplemodal",function(G){if(F.o.modal&&G.keyCode===9){F.watchTab(G)}else{if(F.o.close&&F.o.escClose&&G.keyCode===27){G.preventDefault();F.close()}}});C(window).bind("resize.simplemodal",function(){B=F.getDimensions();F.o.autoResize?F.setContainerDimensions():F.o.autoPosition&&F.setPosition();if(D||E){F.fixIE()}else{if(F.o.modal){F.d.iframe&&F.d.iframe.css({height:B[0],width:B[1]});F.d.overlay.css({height:B[0],width:B[1]})}}})},unbindEvents:function(){C("."+this.o.closeClass).unbind("click.simplemodal");C(document).unbind("keydown.simplemodal");C(window).unbind("resize.simplemodal");this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var F=this,G=F.o.position;C.each([F.d.iframe||null,!F.o.modal?null:F.d.overlay,F.d.container],function(I,H){if(H){var K=H[0].style;K.position="absolute";if(I<2){K.removeExpression("height");K.removeExpression("width");K.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"');K.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"')}else{var J;if(G&&G.constructor===Array){I=G[0]?typeof G[0]==="number"?G[0].toString():G[0].replace(/px/,""):H.css("top").replace(/px/,"");I=I.indexOf("%")===-1?I+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(I.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"';if(G[1]){J=typeof G[1]==="number"?G[1].toString():G[1].replace(/px/,"");J=J.indexOf("%")===-1?J+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(J.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"'}}else{I='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"';J='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"'}K.removeExpression("top");K.removeExpression("left");K.setExpression("top",I);K.setExpression("left",J)}}})},focus:function(F){var G=this;F=F&&C.inArray(F,["first","last"])!==-1?F:"first";var H=C(":input:enabled:visible:"+F,G.d.wrap);setTimeout(function(){H.length>0?H.focus():G.d.wrap.focus()},10)},getDimensions:function(){var F=C(window);return[C.browser.opera&&C.browser.version>"9.5"&&C.fn.jquery<"1.3"||C.browser.opera&&C.browser.version<"9.5"&&C.fn.jquery>"1.2.6"?F[0].innerHeight:F.height(),F.width()]},getVal:function(F,G){return F?typeof F==="number"?F:F==="auto"?0:F.indexOf("%")>0?parseInt(F.replace(/%/,""))/100*(G==="h"?B[0]:B[1]):parseInt(F.replace(/px/,"")):null},update:function(F,G){var H=this;if(!H.d.data){return false}H.d.origHeight=H.getVal(F,"h");H.d.origWidth=H.getVal(G,"w");H.d.data.hide();F&&H.d.container.css("height",F);G&&H.d.container.css("width",G);H.setContainerDimensions();H.d.data.show();H.o.focus&&H.focus();H.unbindEvents();H.bindEvents()},setContainerDimensions:function(){var H=this,I=D||A,J=H.d.origHeight?H.d.origHeight:C.browser.opera?H.d.container.height():H.getVal(I?H.d.container[0].currentStyle.height:H.d.container.css("height"),"h");I=H.d.origWidth?H.d.origWidth:C.browser.opera?H.d.container.width():H.getVal(I?H.d.container[0].currentStyle.width:H.d.container.css("width"),"w");var M=H.d.data.outerHeight(true),L=H.d.data.outerWidth(true);H.d.origHeight=H.d.origHeight||J;H.d.origWidth=H.d.origWidth||I;var K=H.o.maxHeight?H.getVal(H.o.maxHeight,"h"):null,F=H.o.maxWidth?H.getVal(H.o.maxWidth,"w"):null;K=K&&K<B[0]?K:B[0];F=F&&F<B[1]?F:B[1];var G=H.o.minHeight?H.getVal(H.o.minHeight,"h"):"auto";J=J?H.o.autoResize&&J>K?K:J<G?G:J:M?M>K?K:H.o.minHeight&&G!=="auto"&&M<G?G:M:G;K=H.o.minWidth?H.getVal(H.o.minWidth,"w"):"auto";I=I?H.o.autoResize&&I>F?F:I<K?K:I:L?L>F?F:H.o.minWidth&&K!=="auto"&&L<K?K:L:K;H.d.container.css({height:J,width:I});H.d.wrap.css({overflow:M>J||L>I?"auto":"visible"});H.o.autoPosition&&H.setPosition()},setPosition:function(){var F=this,G,H;G=B[0]/2-F.d.container.outerHeight(true)/2;H=B[1]/2-F.d.container.outerWidth(true)/2;if(F.o.position&&Object.prototype.toString.call(F.o.position)==="[object Array]"){G=F.o.position[0]||G;H=F.o.position[1]||H}else{G=G;H=H}F.d.container.css({left:H,top:G})},watchTab:function(F){var G=this;if(C(F.target).parents(".simplemodal-container").length>0){G.inputs=C(":input:enabled:visible:first, :input:enabled:visible:last",G.d.data[0]);if(!F.shiftKey&&F.target===G.inputs[G.inputs.length-1]||F.shiftKey&&F.target===G.inputs[0]||G.inputs.length===0){F.preventDefault();G.focus(F.shiftKey?"last":"first")}}else{F.preventDefault();G.focus()}},open:function(){var F=this;F.d.iframe&&F.d.iframe.show();if(C.isFunction(F.o.onOpen)){F.o.onOpen.apply(F,[F.d])}else{F.d.overlay.show();F.d.container.show();F.d.data.show()}F.o.focus&&F.focus();F.bindEvents()},close:function(){var F=this;if(!F.d.data){return false}F.unbindEvents();if(C.isFunction(F.o.onClose)&&!F.occb){F.occb=true;F.o.onClose.apply(F,[F.d])}else{if(F.d.placeholder){var G=C("#simplemodal-placeholder");if(F.o.persist){G.replaceWith(F.d.data.removeClass("simplemodal-data").css("display",F.display))}else{F.d.data.hide().remove();G.replaceWith(F.d.orig)}}else{F.d.data.hide().remove()}F.d.container.hide().remove();F.d.overlay.hide();F.d.iframe&&F.d.iframe.hide().remove();setTimeout(function(){F.d.overlay.remove();F.d={}},10)}}}})(jQuery);function wp_confirm(C,H,G){if($("#wp-confirmpnl_overlay,#wp-confirm_panel").size()){return}var A=286,F="",B='<div id="wp-confirmpnl_overlay"></div>';F='<div id="wp-confirm_panel" class="overz wp-manage_panel wp-alert-panel" style="position:absolute;width:'+A+'px;z-index:10001;"><div class="wp-panel_outpadding overz"><div class="wp-manage_panel_block_one wp-manage-link overz"><h2 class="overz">'+C+'</h2></div><div class="wp-alert_button overz"><a href="javascript:;" class="wp-alert-sure">'+translate("Sure")+'</a><a href="javascript:;" class="wp-alert-cancel">'+translate("Cancel")+"</a></div></div></div>";$(B+F).appendTo("body");var D=$("#wp-confirm_panel");D.bind("rename",function(L,I){if(I.length){var K=this;$("a.wp-alert-sure",K).html(I);var J=setTimeout(function(){var M=$("a.wp-alert-sure",K).outerWidth(true)+$("a.wp-alert-cancel",K).outerWidth(true);$(".wp-alert_button",K).width(M);M=null;clearTimeout(J)},50)}});var E=setTimeout(function(){var I=D.find(".wp-alert_button");I.width(I.outerWidth())},30);panel_position(D,A,"auto",true,"wp-confirmpnl_overlay");$(window).resize(function(){panel_position(D,A,"auto",true,"wp-confirmpnl_overlay")});D.find("a.wp-alert-sure").click(function(I){if(H&&$.isFunction(H)){H()}D.add("#wp-confirmpnl_overlay").remove();if(E){clearTimeout(E)}I.preventDefault()}).end().find("a.wp-alert-cancel").click(function(I){if(G&&$.isFunction(G)){G()}D.add("#wp-confirmpnl_overlay").remove();if(E){clearTimeout(E)}I.preventDefault()});$(document).keydown(function(I){if(I.keyCode==13){D.find("a.wp-alert-sure").trigger("click")}});return false}function wp_editPicOnline(A){var C=parseInt(getImageProcessType())||0;var D=["feather","xiuxiu"];if(C>=D.length){C=0}var B=D[C];$LAB.script(relativeToAbsoluteURL("script/wopop2_"+B+".js")).wait(function(){wp_editPicOnlineActual(A)})}function wp_alert(C,F){if($("#wp-alertpnl_overlay,#wp-alert_panel").size()){return}var B=286,E="",D='<div id="wp-alertpnl_overlay"></div>';E='<div id="wp-alert_panel" class="overz wp-manage_panel wp-alert-panel" style="position:absolute;width:'+B+'px;z-index:10001;"><div class="wp-panel_outpadding overz"><div class="wp-manage_panel_block_one wp-manage-link overz"><h2 class="overz">'+C+'</h2></div><div class="wp-alert_button overz" style="width:55px;"><a href="javascript:;" class="wp-alert-sure">'+translate("Sure")+"</a></div></div></div>";$(D+E).appendTo("body");var A=$("#wp-alert_panel");panel_position(A,B,"auto",true,"wp-alertpnl_overlay");$(window).resize(function(){panel_position(A,B,"auto",true,"wp-alertpnl_overlay")});A.find("a.wp-alert-sure").click(function(G){A.add("#wp-alertpnl_overlay").remove();if($.isFunction(F)){F()}G.preventDefault()});$(document).keydown(function(G){if(G.keyCode==13){A.find("a.wp-alert-sure").trigger("click")}});return false}function show_dialog(C,F,D,B,G,A){var E=$.extend({},{open:function(H){},close:function(H){}},G||{});$("#osx-modal-content").modal({overlayId:"osx-overlay",containerId:"osx-container",closeHTML:null,zIndex:1000,opacity:25,onOpen:function(L){E.open(L);var K=this,I=L.container,H=I[0];var M=$("#osx-modal-data",H);if(A=="iframe"){M.html('<iframe src="'+C+'" frameborder="0" width="'+D+'" onload="this.height=this.contentWindow.document.documentElement.scrollHeight" scrolling="no"></iframe>');L.overlay.show();M.show();$("#osx-modal-content,div.close",H).show();$("#osx-modal-title",H).html(F).show();I.fadeTo("fast",1).draggable({handle:"#osx-modal-title",cursor:"move"})}else{var N=$("#wp-ajaxsend_loading2"),J=$(window);if(N.size()==0){$('<div id="wp-ajaxsend_loading2" style="width:'+J.width()+"px;height:"+J.height()+'px;z-index:9999;"><img src="'+relativeToAbsoluteURL("template/default/images/loading.gif")+'" width="32" height="32" /></div>').appendTo("body")}$.get(C,function(O){M.html(O);L.overlay.show();M.show();$("#osx-modal-content,div.close",H).show();$("#osx-modal-title",H).html(F).show();I.fadeTo("fast",1).draggable({handle:"#osx-modal-title",cursor:"move"});K.setPosition();$("#wp-ajaxsend_loading2").remove()}).error(function(){$("#wp-ajaxsend_loading2").remove();alert(translate("Request failed!"));K.close();return})}if(D>0){I.css("width",D)}I.css("height",B||"");$("#osx-modal-content").bind("add_loading",function(){var O=M.children(".loading");if(O.size()){O.remove()}$('<div class="loading" style="width:'+M.width()+"px;height:"+M.outerHeight()+'px;z-index:9999;"><img src="'+relativeToAbsoluteURL("template/default/images/loading.gif")+'" width="32" height="32" /></div>').appendTo(M)})},onClose:function(I){E.close(I);var H=this;I.container.hide();I.overlay.hide();$("#osx-modal-content").triggerHandler("dialogclose",I);$("#osx-modal-content").unbind("dialogclose");$("#osx-modal-content").unbind("add_loading");setTimeout(function(){H.close()},500)}})}(function(C,F){var A={};var B={};C.modplugin={addCallBack:function(G,H,I){if(C.isFunction(I)){if(!A[G]){A[G]={}}A[G][H]=I}},fireCallBack:function(G,J,I,K){var H=A[G];if(!H){return false}H=H[J];if(C.isFunction(H)){return H(I,K)}else{return false}}};C.fn.execPluginCallBack=function(G,H){return C.modplugin.fireCallBack(this.attr("type"),G,this,H)};C.fn.mod_property=function(H,K){if(C.isPlainObject(H)){for(var I in H){this.mod_property(I,H[I])}return}var J=this.prop("id");if(!J){return null}var G=B[J];if(!G){B[J]=G={}}if(K!==F){G[H]=K;return K}else{return G[H]}};var E=null;function D(){if(E){return}E=Undo.Command.createModuleCommand(function(H,I){var G=C("#"+H);if(I.propval!=F){G.mod_property(I.propkey,I.propval)}else{G.del_mod_property(I.propkey)}G.execPluginCallBack("property_undo",I)},null,{returntype:"class"})}C.fn.autoundo_mod_property=function(I,K){if(K===F){return this.mod_property(I)}D();var J=this.mod_property(I);this.mod_property(I,K);var H={propkey:I,propval:J,act:"set",cmdtype:"undo"};var G={propkey:I,propval:K,act:"set",cmdtype:"redo"};if(!Undo.Command.DefaultEqAct(J,K)){new E(this.attr("id")).insertWithVals(H,G)}};C.fn.autoundo_del_mod_property=function(I){D();var J=this.mod_property(I);this.del_mod_property(I);var H={propkey:I,propval:J,act:"del",cmdtype:"undo"};var G={propkey:I,act:"del",cmdtype:"redo"};if(J!=F){new E(this.attr("id")).insertWithVals(H,G)}};C.fn.del_mod_property=function(H){var I=this.prop("id");if(!I){return null}var G=B[I];if(C.isPlainObject(G)){var J=G[H];delete G[H];return J}};C.fn.get_mod_property=function(){var H=this.prop("id");if(!H){return null}var G=B[H];return G||{}}})(jQuery);